function onEntry(e) {
  e.forEach((e) => {
    e.isIntersecting && e.target.classList.add("element-show");
  });
}


$('.address-list li').on('click', function(e){
    $(this).addClass('active')
    $('.address-list li').not(this).removeClass('active')
})

let options = { threshold: [0.5] },
  observer = new IntersectionObserver(onEntry, options),
  elements = document.querySelectorAll(".element-animation");
for (let e of elements) observer.observe(e);
let oldScrollTopPosition = 0,
  width = $(window).width();
width >= 780 &&
  (window.onscroll = () => {
    const e = document.documentElement.scrollTop;
    oldScrollTopPosition > e
      ? $(".header").removeClass("hide")
      : $(".header").addClass("hide"),
      (oldScrollTopPosition = e);
  }),
  $(".open__merch").on("click", function (e) {
    $(this).next(".sale__body-block-item-modal").addClass("active"),
      setTimeout(() => {
        $(this)
          .next(".sale__body-block-item-modal")
          .children(".sale__body-block-item-modal-body")
          .addClass("active");
      }, 500);
  }),
  $(".close__sale").on("click", function (e) {
    $(".sale__body-block-item-modal-body").removeClass("active"),
      setTimeout(() => {
        $(".sale__body-block-item-modal").removeClass("active");
      }, 300);
  });
let col = 0;
$(window).on("scroll", function (e) {
  $(this).scrollTop() >= 500 &&
    0 == col &&
    (col++, $(".social__body").addClass("active"));
}),
  $(".social__open").on("click", function () {
    $(".social__body").addClass("active"), $(this).removeClass("active");
  }),
  $(".close__social").on("click", function (e) {
    $(".social__body").removeClass("active"),
      $(".social__open").addClass("active");
  }),
  $(".main__body-cap-circle button").on("click", function (e) {
    $(this).next(".main__body-cap-circle-info").toggleClass("active");
  }),
  document.querySelectorAll(".popular__body-caption").forEach((e) => {
    e.addEventListener("click", () => {
      let o = e.querySelector(".popular__body-caption-bot"),
        t = o.parentNode;
      o.style.maxHeight
        ? (document
            .querySelectorAll(".popular__body-caption-bot")
            .forEach((e) => (e.style.maxHeight = null)),
          document
            .querySelectorAll(".popular__body-caption")
            .forEach((e) => e.classList.remove("open")))
        : (document
            .querySelectorAll(".popular__body-caption-bot")
            .forEach((e) => (e.style.maxHeight = null)),
          document
            .querySelectorAll(".popular__body-caption")
            .forEach((e) => e.classList.remove("open")),
          t.classList.add("open"),
          (o.style.maxHeight = o.scrollHeight + "px"));
    });
  }),
  document.querySelectorAll(".franchising__lists-main").forEach((e) => {
    e.addEventListener("click", () => {
      let o = e.querySelector(".franchising__lists-main-bot"),
        t = o.parentNode;
      o.style.maxHeight
        ? (document
            .querySelectorAll(".franchising__lists-main-bot")
            .forEach((e) => (e.style.maxHeight = null)),
          document
            .querySelectorAll(".franchising__lists-main")
            .forEach((e) => e.classList.remove("open")))
        : (document
            .querySelectorAll(".franchising__lists-main-bot")
            .forEach((e) => (e.style.maxHeight = null)),
          document
            .querySelectorAll(".franchising__lists-main")
            .forEach((e) => e.classList.remove("open")),
          t.classList.add("open"),
          (o.style.maxHeight = o.scrollHeight + "px"));
    });
  }),
  $(document).ready(function () {
    $(".station__bottom-block-item")
      .on("mousemove", function (e) {
        var o = $(this).find(".hover__img");
        $(this).children("img").addClass("active"),
          o.css({
            top: e.pageY - $(this).offset().top - 128.5,
            left: e.pageX - $(this).offset().left - 223,
          });
      })
      .on("mouseout", function () {
        $(this).children(".hover__img").removeClass("active");
      }),
      $(".franchising__bottom-block-item")
        .on("mousemove", function (e) {
          var o = $(this).find(".hover__img");
          $(this).children("img").addClass("active"),
            o.css({
              top: e.pageY - $(this).offset().top - 128.5,
              left: e.pageX - $(this).offset().left - 223,
            });
        })
        .on("mouseout", function () {
          $(this).children(".hover__img").removeClass("active");
        });
  }),
  $(".open__merch").on("click", function (e) {
    $(this).next(".merch__body-block-slide-modal").addClass("active"),
      setTimeout(() => {
        $(this)
          .next(".merch__body-block-slide-modal")
          .children(".merch__body-block-slide-modal-main")
          .addClass("active");
      }, 500);
  }),
  $(".close__merch").on("click", function (e) {
    $(".merch__body-block-slide-modal-main").removeClass("active"),
      $(".merch__modal-body").removeClass("active"),
      setTimeout(() => {
        $(".merch__body-block-slide-modal").removeClass("active"),
          $(".merch__modal").removeClass("active");
      }, 300);
  }),
  $(".order__button").on("click", function (e) {
    $(".merch__body-block-slide-modal-main").removeClass("active"),
      setTimeout(() => {
        $(".merch__body-block-slide-modal").removeClass("active"),
          $(".merch__modal").addClass("active");
      }, 300),
      setTimeout(() => {
        $(".merch__modal-body").addClass("active");
      }, 500);
  }),
  width >= 780 &&
    $(document).ready(function () {
      $(document).on("mousemove", function (e) {
        if (
          ($(".reviews__wrap").each(function () {
            var o = $(this).offset(),
              t = o.left,
              n = o.top,
              l = e.pageX - t,
              i = e.pageY - n;
            $(this).css({ transform: `translate(${-l / 25}px, ${-i / 25}px)` });
          }),
          $(".pink__bubble").each(function () {
            var o = $(this).offset(),
              t = o.left,
              n = o.top,
              l = e.pageX - t,
              i = e.pageY - n;
            $(this).css({ transform: `translate(${l / 15}px , ${i / 15}px)` });
          }),
          $(".green__bubble").each(function () {
            var o = $(this).offset(),
              t = o.left,
              n = o.top,
              l = e.pageX - t,
              i = e.pageY - n;
            $(this).css({
              transform: `translate(${-l / 15}px , ${-i / 15}px)`,
            });
          }),
          document.querySelector(".about__body-bubble-low") &&
            $(".about__body-bubble-low").each(function () {
              var o = $(this).offset(),
                t = o.left,
                n = o.top,
                l = e.pageX - t,
                i = e.pageY - n;
              $(this).css({
                transform: `translate(${l / 15}px , ${i / 15}px)`,
              });
            }),
          document.querySelector(".about__body-bubble-medium") &&
            $(".about__body-bubble-medium").each(function () {
              var o = $(this).offset(),
                t = o.left,
                n = o.top,
                l = e.pageX - t,
                i = e.pageY - n;
              $(this).css({
                transform: `translate(${-l / 30}px , ${-i / 30}px)`,
              });
            }),
          document.querySelector(".about__body-bubble-big") &&
            document.querySelector(".about__body-bubble-sobig"))
        ) {
          var o = $(".about__body-bubble-big").offset(),
            t = $(".about__body-bubble-sobig").offset(),
            n = o.left,
            l = o.top,
            i = t.left,
            a = t.top,
            r = e.pageX - n,
            s = e.pageY - l,
            c = e.pageX - i,
            d = e.pageY - a;
          $(".about__body-bubble-sobig").css({
            transform: `translate(${r / 50}px , ${-s / 50}px)`,
          }),
            $(".about__body-bubble-big").css({
              transform: `translate(${-c / 50}px , ${d / 50}px)`,
            });
        }
      });
    }),
  SmoothScroll({
    animationTime: 800,
    stepSize: 45,
    accelerationDelta: 30,
    accelerationMax: 1,
    keyboardSupport: !0,
    arrowScroll: 100,
    pulseAlgorithm: !0,
    pulseScale: 4,
    pulseNormalize: 1,
    touchpadSupport: !0,
  }),
  $(".burger").on("click", function (e) {
    $(".header").toggleClass("active"),
      $(this).toggleClass("active"),
      $("body").toggleClass("hidden");
  }),
  $(window).on("load", function () {
    $(".catalog__body-nav-text .all").text(`${$(".catalog__item").length}`);
  });
const controller = new ScrollMagic.Controller();
if (width > 780) {
  if (document.querySelector(".catalog")) {
    const e = document.querySelectorAll(".catalog__body-item"),
      o = document.querySelectorAll(".catalog__body-nav-dot"),
      t =
        (document.querySelector(".catalog__body-nav-text span"),
        document.querySelector(".catalog")),
      n = gsap.timeline();
    e.forEach((e, o) => {
      n.to(e, { opacity: 1, y: 0, duration: 1, ease: "power2.out" });
    }),
      new ScrollMagic.Scene({
        triggerElement: t,
        triggerHook: "onLeave",
        duration: "300%",
      })
        .setPin(t)
        .setTween(n)
        .addTo(controller),
      new ScrollMagic.Scene({
        triggerElement: t,
        triggerHook: "onLeave",
        duration: "300%",
      })
        .on("progress", (t) => {
          const n = t.progress,
            l = Math.floor(n * e.length);
          o.forEach((e) => e.classList.remove("active")),
            o[l] &&
              (o[l].classList.add("active"),
              $(".catalog__body-nav-text span").text(`${l + 1}`));
        })
        .addTo(controller);
  }
  const e = new TimelineMax();
  e.to(".one__line", { x: "-206%", duration: 2 }, 0).to(
    ".two__line",
    { x: "6%", duration: 2 },
    0
  );
  new ScrollMagic.Scene({
    triggerElement: ".station",
    duration: 2e3,
    triggerHook: "onLeave",
  })
    .setPin(".station")
    .setTween(e)
    .addTo(controller);
  const o = new TimelineMax();
  o.to(".fran__one", { x: "-194.5%", duration: 2 }, 0).to(
    ".fran__two",
    { x: "5.5%", duration: 2 },
    0
  );
  new ScrollMagic.Scene({
    triggerElement: ".franchising__soft",
    duration: 1e3,
    triggerHook: "onEnter",
  })
    .setTween(o)
    .addTo(controller);
}
if (width <= 780) {
  const e = new TimelineMax();
  e.to(".one__line", { x: "-623%", duration: 2 }, 0).to(
    ".two__line",
    { x: "7%", duration: 2 },
    0
  );
  new ScrollMagic.Scene({
    triggerElement: ".station",
    duration: 1500,
    triggerHook: "onLeave",
  })
    .setPin(".station")
    .setTween(e)
    .addTo(controller);
  const o = new TimelineMax();
  o.to(".fran__one", { x: "-603.5%", duration: 2 }, 0).to(
    ".fran__two",
    { x: "0%", duration: 2 },
    0
  );
  new ScrollMagic.Scene({
    triggerElement: ".franchising__soft",
    duration: 700,
    triggerHook: "onEnter",
  })
    .setTween(o)
    .addTo(controller);
  const t = new TimelineMax();
  t.to(
    ".station__bottom-block",
    {
      x:
        "" +
        (-342 * ($(".station__bottom-block-item").length - 1) +
          -24 * ($(".station__bottom-block-item").length - 1) +
          "rem"),
      duration: 2,
    },
    0
  );
  new ScrollMagic.Scene({
    triggerElement: ".station__bottom",
    duration: 600,
    triggerHook: "onCenter",
  })
    .setTween(t)
    .addTo(controller);
  const n = new TimelineMax();
  n.to(
    ".franchising__bottom-block",
    {
      x:
        "" +
        (-342 * ($(".franchising__bottom-block-item").length - 1) +
          -24 * ($(".franchising__bottom-block-item").length - 1) +
          "rem"),
      duration: 2,
    },
    0
  );
  new ScrollMagic.Scene({
    triggerElement: ".franchising__bottom",
    duration: 600,
    triggerHook: "onCenter",
  })
    .setTween(n)
    .addTo(controller);
}
if (
  (document.querySelector(".merch__slider-modal") &&
    $(".merch__slider-modal").each(function (e) {
      let o = new Splide(this, { type: "loop", pagination: !1 });
      var t = o.root.querySelector(".my-slider-progress-bar");
      o.on("mounted move", function () {
        var e = o.Components.Controller.getEnd() + 1,
          n = Math.min((o.index + 1) / e, 1);
        t.style.width = String(100 * n) + "%";
      }),
        o.mount();
    }),
  document.querySelector(".lines"))
) {
  var splideLine = new Splide(".lines", {
      type: "loop",
      pagination: !1,
      perMove: 1,
      arrows: !1,
    }),
    barLine = splideLine.root.querySelector(".my-slider-progress-bar");
  splideLine.on("mounted move", function () {
    var e = splideLine.Components.Controller.getEnd() + 1,
      o = Math.min((splideLine.index + 1) / e, 1);
    barLine.style.width = String(100 * o) + "%";
  }),
    splideLine.mount();
}
if (document.querySelector(".fran__slider")) {
  var splideFran = new Splide(".fran__slider", {
      pagination: !1,
      type: "loop",
      perMove: 1,
      arrows: !1,
    }),
    barFran = splideFran.root.querySelector(".my-slider-progress-bar");
  splideFran.on("mounted move", function () {
    var e = splideFran.Components.Controller.getEnd() + 1,
      o = Math.min((splideFran.index + 1) / e, 1);
    barFran.style.width = String(100 * o) + "%";
  }),
    splideFran.mount();
}
if (document.querySelector(".catalog__slider")) {
  var splideCatalog = new Splide(".catalog__slider", {
    perPage: 1,
    perMove: 1,
    type: "loop",
    pagination: !1,
  });
  $(window).on("load", function (e) {
    $(".catalog__slider-nav .all").text(`${splideCatalog.length}`);
  }),
    splideCatalog.on("move", function (e) {
      $(".catalog__slider-nav span").text(`${e + 1}`);
    }),
    splideCatalog.mount();
}
var splide;
document.querySelector(".merch__slider-main") &&
  (splide = new Splide(".merch__slider-main", {
    perPage: 1,
    type: "loop",
    pagination: !1,
  })).mount();
document.querySelector(".merch__slider-soft") &&
  (splide = new Splide(".merch__slider-soft", {
    perPage: 1,
    type: "loop",
    pagination: !1,
  })).mount();
